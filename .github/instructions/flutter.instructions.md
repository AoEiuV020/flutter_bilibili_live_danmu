---
applyTo: '**'
---

# Flutter/Dart 项目编码规范

## 文件组织原则

### 一个类一个文件
- **强制规则**：每个 Dart 类必须独立存放在单独的文件中
- **文件命名**：使用小写下划线命名法（snake_case），与类名对应
  - 例如：`DanmakuMessage` 类 → `danmaku_message.dart`
  - 例如：`WebSocketClient` 类 → `websocket_client.dart`
- **例外情况**：
  - 枚举（enum）可以与相关类放在一起
  - 非常简单的辅助类（<10行）可以考虑合并
  - 私有内部类可以与外部类放在一起
- **统一导出**：使用 barrel 文件（如 `models.dart`）统一导出所有相关类

### 目录结构
```
lib/
  src/
    models/          # 数据模型，每个类一个文件
    websocket/       # WebSocket 相关，每个类一个文件
    utils/           # 工具类，每个类一个文件
    interceptors/    # 拦截器，每个类一个文件
```

### 为什么要遵循这个规则？
1. **可维护性**：快速定位和修改特定类
2. **可读性**：避免文件过大，降低理解成本
3. **协作友好**：减少合并冲突
4. **符合 Dart 社区最佳实践**

## 代码组织

### 导入顺序
1. Dart SDK 库
2. Flutter 框架库
3. 第三方包
4. 项目内部文件

### 类成员顺序
1. 静态常量
2. 静态变量
3. 实例变量
4. 构造函数
5. 静态方法
6. 实例方法
7. 私有方法

## 命名规范

- **类名**：大驼峰（PascalCase）
- **文件名**：小写下划线（snake_case）
- **变量/方法**：小驼峰（camelCase）
- **常量**：小驼峰（camelCase），加 `const` 或 `final`
- **私有成员**：前缀 `_`

## 注释规范

- 公开 API 必须有文档注释（`///`）
- 复杂逻辑必须有行内注释（`//`）
- 使用 `TODO:`、`FIXME:`、`NOTE:` 标记
